{% block stylesheet %}
<link rel="stylesheet" href="{{ asset('css/navbar.css') }}" />
{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/cart.js') }}"></script>
<script src="{{ asset('js/userdropdown.js') }}"></script>
{% endblock %}

<header>
  <div class="logo" onclick="location.href='{{ path('index') }}'">RT Pizza</div>
  <nav>
    <a href="{{ path('menu') }}">Menu</a>
    <a href="{{ path('make_your_own') }}">Make your Own Pizza</a>
    <a href="#contact">Contact</a>

    <button id="cart-toggle" class="cart-toggle btn btn-link position-relative" style="text-decoration: none;">
      ðŸ›’Cart
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
        ({{ cart_items|length }})
      </span>
    </button>

    <div id="cart-dropdown" class="dropdown-menu">
        <div id="cart-items-list">
        <div class="text-muted">Chargement...</div>
        </div>
        <div id="cart-total" class="fw-bold cart-total">Total : $0.00</div>
        <form action="{{ path('command') }}" method="GET">
        <button type="submit" class="btn command-btn">Command</button>
        </form>
    </div>


    {% if app.user %}
      <div class="user-menu">
        <span class="username" onclick="toggleDropdown()">
          ðŸ‘¤ {{ app.user.username }}
          {% if is_granted('ROLE_ADMIN') %}
            <span class="tag-admin">[Admin]</span>
          {% endif %}
        </span>
        <div class="dropdown" id="user-dropdown">
          <a href="{{ path('logout') }}">Logout</a>
          {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('menu_add') }}">Add Product</a>
            <a href="{{ path('ingredient_stock') }}">Check Ingredients</a>
          {% endif %}
        </div>
      </div>
    {% else %}
      <a href="{{ path('log_reg_page') }}">Connexion</a>
    {% endif %}
  </nav>
  
</header>
