{% extends 'base.html.twig' %}

{% block title %}Login & Register - RT Pizza{% endblock %}

{% block body %}
  <div class="container">
    <div class="header">
      <span class="pizza-icon" aria-hidden="true">üçï</span>
      <h1>RT Pizza</h1>
      <p>Login or Register to order your favorite pizza!</p>
    </div>

    <nav class="form-toggle">
      <button id="login-tab" class="active">Login</button>
      <button id="register-tab">Register</button>
    </nav>

    {# Login Form (handled by Symfony Security) #}
    <form id="login-form" class="active" method="POST" action="">
      <input type="hidden" name="_csrf_token" value="">

      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="Enter your email"
        value="{{ last_email|default('') }}"
      >

      <label for="password">Password</label>
      <input
        type="password"
        id="password"
        name="password"
        required
        placeholder="Enter your password"
      >

      <button type="submit" class="submit-btn">Login</button>

      {% if error %}
        <div class="error">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
      {% endif %}
    </form>

    {# Register Form #}
    <form id="register-form" method="POST">
      {{ form_start(registrationForm, {'attr': {'class': 'my-registration-form'} }) }}
        {{ form_row(registrationForm.username) }}
        {{ form_row(registrationForm.email) }}
        {{ form_row(registrationForm.plainPassword.first) }}
        {{ form_row(registrationForm.plainPassword.second) }}
        <button type="submit" class="submit-btn">Register</button>
      {{ form_end(registrationForm) }}
    </form>

    <p class="footer-text">Made with ‚ù§Ô∏è for pizza lovers</p>
  </div>

  <script>
    const loginTab = document.getElementById("login-tab");
    const registerTab = document.getElementById("register-tab");
    const loginForm = document.getElementById("login-form");
    const registerForm = document.getElementById("register-form");

    loginTab.addEventListener("click", () => {
      loginTab.classList.add("active");
      registerTab.classList.remove("active");
      loginForm.classList.add("active");
      registerForm.classList.remove("active");
    });

    registerTab.addEventListener("click", () => {
      registerTab.classList.add("active");
      loginTab.classList.remove("active");
      registerForm.classList.add("active");
      loginForm.classList.remove("active");
    });
  </script>
{% endblock %}
